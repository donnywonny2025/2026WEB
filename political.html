<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeff Kerr — Legal & Political Work</title>
    <meta name="description"
        content="Jeff Kerr — Legal & Political video production work. Government, advocacy, and political campaigns.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* ═══════════════════════════════════════════
           POLITICAL PAGE — Overrides & additions
           ═══════════════════════════════════════════ */

        /* Hero override — shorter, no video */
        .political-hero {
            min-height: 60vh;
            background: var(--black);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 0 48px 80px;
            position: relative;
            overflow: hidden;
        }

        .political-hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                    rgba(10, 10, 10, 1) 0%,
                    rgba(30, 15, 15, 1) 50%,
                    rgba(10, 10, 10, 1) 100%);
            z-index: 0;
        }

        .political-hero::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg,
                    transparent 0%,
                    rgba(232, 85, 51, 0.3) 50%,
                    transparent 100%);
        }

        .political-hero>* {
            position: relative;
            z-index: 1;
        }

        .political-hero h1 {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: clamp(48px, 8vw, 100px);
            line-height: 0.9;
            letter-spacing: -2px;
            text-transform: uppercase;
            color: var(--text-light);
            margin-bottom: 16px;
        }

        .political-hero h1 span {
            color: var(--accent);
        }

        .political-hero .hero-sub {
            font-family: var(--font-body);
            font-size: 17px;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.5);
            max-width: 600px;
            line-height: 1.6;
        }

        .political-hero .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-body);
            font-size: 13px;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 48px;
            transition: color 0.3s ease;
        }

        .political-hero .back-link:hover {
            color: var(--accent);
        }

        .political-hero .back-link svg {
            width: 16px;
            height: 16px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }

        /* Confidentiality notice */
        .confidential-notice {
            background: rgba(232, 85, 51, 0.06);
            border-left: 2px solid var(--accent);
            padding: 16px 24px;
            margin: 0;
            padding-left: 72px;
            padding-right: 48px;
            padding-top: 32px;
            padding-bottom: 32px;
            font-family: var(--font-body);
            font-size: 13px;
            font-weight: 400;
            letter-spacing: 0.3px;
            color: rgba(0, 0, 0, 0.55);
            line-height: 1.6;
            border-left: none;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
        }

        .confidential-notice strong {
            color: var(--accent);
            font-weight: 500;
        }

        /* Project grid on this page */
        .political-work {
            background: var(--black);
            color: var(--text-light);
            padding: 80px 48px;
        }

        .political-work .work-header {
            margin-bottom: 60px;
        }

        /* Filter tabs */
        .filter-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 48px;
            flex-wrap: wrap;
        }

        .filter-tab {
            font-family: var(--font-body);
            font-size: 13px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            padding: 10px 24px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 100px;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-tab:hover {
            border-color: rgba(255, 255, 255, 0.4);
            color: var(--text-primary);
        }

        .filter-tab.active {
            background: var(--accent) !important;
            border-color: var(--accent) !important;
            color: #fff !important;
            opacity: 1 !important;
        }

        .project.filter-hidden {
            display: none;
        }
    </style>
</head>

<body>

    <!-- ═══════════════════════════════════════════
         NAVIGATION — Same as main site
         ═══════════════════════════════════════════ -->
    <a href="index.html" class="floating-logo" aria-label="Home">
        <img src="jk-monogram.png" alt="JK">
    </a>

    <div class="menu-wrapper" id="menuWrapper">
        <button class="menu-trigger" id="menuTrigger" aria-expanded="false" aria-haspopup="true">
            <span class="menu-trigger-text">Menu</span>
            <svg class="menu-chevron" width="12" height="12" viewBox="0 0 12 12" fill="none">
                <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
        </button>
        <div class="menu-dropdown" id="menuDropdown" role="menu">
            <a href="index.html#work" class="menu-item" role="menuitem">
                <svg class="menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="7" width="20" height="14" rx="2" />
                    <path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2" />
                </svg>
                <span class="menu-item-label">Work</span>
            </a>
            <a href="index.html#about" class="menu-item" role="menuitem">
                <svg class="menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="8" r="4" />
                    <path d="M20 21a8 8 0 0 0-16 0" />
                </svg>
                <span class="menu-item-label">About</span>
            </a>
            <div class="menu-divider"></div>
            <a href="index.html#contact" class="menu-item" role="menuitem">
                <svg class="menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                    <polyline points="22,6 12,13 2,6" />
                </svg>
                <span class="menu-item-label">Contact</span>
            </a>
            <a href="index.html#faq" class="menu-item" role="menuitem">
                <svg class="menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                    <line x1="12" y1="17" x2="12.01" y2="17" />
                </svg>
                <span class="menu-item-label">FAQ</span>
            </a>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════
         HERO
         ═══════════════════════════════════════════ -->
    <section class="political-hero">
        <a href="index.html" class="back-link">
            <svg viewBox="0 0 24 24">
                <polyline points="15 18 9 12 15 6" />
            </svg>
            Back to Main Site
        </a>
        <h1>Legal <span>&</span><br>Political</h1>
        <p class="hero-sub">
            Government, advocacy, and political campaign work.
            Fifteen years of compliance-ready, rapid-response video production.
        </p>
    </section>

    <!-- ═══════════════════════════════════════════
         CONFIDENTIAL NOTICE
         ═══════════════════════════════════════════ -->
    <div class="confidential-notice">
        <strong>Private Portfolio.</strong> This page contains work samples shared on a case-by-case basis.
        Please do not distribute this link without permission.
    </div>

    <!-- ═══════════════════════════════════════════
         PROJECTS
         ═══════════════════════════════════════════ -->
    <section class="political-work">
        <div class="work-header reveal">
            <h2>Selected Work</h2>
            <span class="work-count">08 Projects</span>
        </div>

        <div class="filter-tabs reveal">
            <button class="filter-tab active" data-filter="political">Political</button>
            <button class="filter-tab" data-filter="government">Government</button>
            <button class="filter-tab" data-filter="legal">Legal</button>
            <button class="filter-tab" data-filter="all">All</button>
        </div>

        <!-- 01 — Trump Taj 1 -->
        <div class="project reveal" data-project="0" data-category="political">
            <div class="project-number">01</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/kO5SH1bXPhE/maxresdefault.jpg" alt="Trump Taj Mahal — Part 1">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">Trump Taj<br>Mahal — Pt. 1</div>
                <div class="project-meta">Political · Ad</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

        <!-- 02 — Trump Taj 2 -->
        <div class="project reveal" data-project="1" data-category="political">
            <div class="project-number">02</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/DZajWmSKwjU/maxresdefault.jpg" alt="Trump Taj Mahal — Part 2">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">Trump Taj<br>Mahal — Pt. 2</div>
                <div class="project-meta">Political · Ad</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

        <!-- 03 — David Curry -->
        <div class="project reveal" data-project="2" data-category="political">
            <div class="project-number">03</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/GMD6_PnGfMA/maxresdefault.jpg" alt="David Curry Announcement">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">David Curry<br>Announcement</div>
                <div class="project-meta">Political · Campaign</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

        <!-- 04 — Law & Order -->
        <div class="project reveal" data-project="3" data-category="political">
            <div class="project-number">04</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/Hf6xlsqQBr4/maxresdefault.jpg" alt="Law & Order TV :30">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">Law &<br>Order</div>
                <div class="project-meta">Political · TV :30</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

        <!-- 05 — Hamlin -->
        <div class="project reveal" data-project="4" data-category="legal">
            <div class="project-number">05</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/IfL5xvKUvdE/maxresdefault.jpg" alt="Hamlin Edit">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">Hamlin</div>
                <div class="project-meta">Legal</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

        <!-- 06 — Chatfield Smith -->
        <div class="project reveal" data-project="5" data-category="legal">
            <div class="project-number">06</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/YzIiSskJOrs/maxresdefault.jpg" alt="Chatfield Smith Edit">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">Chatfield<br>Smith</div>
                <div class="project-meta">Legal</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

        <!-- 07 — Chickasha -->
        <div class="project reveal" data-project="6" data-category="political">
            <div class="project-number">07</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/73L1JUTXlg8/maxresdefault.jpg" alt="Chickasha Murder :60">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">Chickasha<br>Murder</div>
                <div class="project-meta">Political · :60</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

        <!-- 08 — Banco Austin -->
        <div class="project reveal" data-project="7" data-category="government">
            <div class="project-number">08</div>
            <div class="project-media">
                <img src="https://img.youtube.com/vi/UR0bXieWumw/maxresdefault.jpg" alt="Banco Austin">
                <div class="project-play">
                    <svg viewBox="0 0 24 24">
                        <polygon points="8,5 20,12 8,19" />
                    </svg>
                </div>
            </div>
            <div class="project-info">
                <div class="project-title">Banco<br>Austin</div>
                <div class="project-meta">Government</div>
                <div class="project-role">Editor</div>
            </div>
        </div>

    </section>

    <!-- ═══════════════════════════════════════════
         PAGE TRANSITION PANEL
         ═══════════════════════════════════════════ -->
    <div class="page-transition" id="pageTransition"></div>

    <!-- ═══════════════════════════════════════════
         PROJECT DETAIL OVERLAY
         ═══════════════════════════════════════════ -->
    <div class="project-detail-overlay" id="projectDetailOverlay">
        <div class="detail-container">
            <a class="detail-back detail-fade-in" id="detailBack">
                <svg viewBox="0 0 24 24">
                    <polyline points="15 18 9 12 15 6" />
                </svg>
                Back
            </a>
            <div class="detail-video detail-fade-in" id="detailVideo">
                <iframe id="detailIframe" src="" allow="autoplay; fullscreen; picture-in-picture"
                    allowfullscreen></iframe>
            </div>
            <h1 class="detail-title detail-fade-in" id="detailTitle"></h1>
            <p class="detail-description detail-fade-in" id="detailDescription"></p>
            <div class="detail-section-label detail-fade-in">Details</div>
            <div class="detail-credits detail-fade-in" id="detailCredits"></div>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════
         FOOTER
         ═══════════════════════════════════════════ -->
    <footer>
        <video class="footer-video-bg" src="Videos/REELQuickLoop.mp4" autoplay muted loop playsinline></video>
        <div class="footer-brand"><img src="jk-monogram.png" alt="JK" style="height: 48px; width: auto;"></div>
        <div class="footer-divider"></div>
        <div class="footer-contact">
            <a href="tel:4076203618">407-620-3618</a>
            <a href="mailto:colour8k@mac.com">colour8k@mac.com</a>
        </div>
        <nav class="footer-nav">
            <a href="index.html">Home</a>
            <a href="index.html#work">Work</a>
            <a href="index.html#contact">Contact</a>
        </nav>
        <div class="footer-social">
            <a href="https://www.linkedin.com/in/jeff-kerr-54109839/" target="_blank" aria-label="LinkedIn">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                </svg>
            </a>
        </div>
        <div class="footer-copyright">&copy; 2026 Jeffery Kerr &middot; Grand Rapids, MI &middot; All Rights Reserved
        </div>
    </footer>

    <script>
        // ─── Dropdown Menu ───
        const menuWrapper = document.getElementById('menuWrapper');
        const menuTrigger = document.getElementById('menuTrigger');
        const menuDropdown = document.getElementById('menuDropdown');

        menuTrigger.addEventListener('click', () => {
            const isOpen = menuDropdown.classList.contains('open');
            menuDropdown.classList.toggle('open');
            menuTrigger.classList.toggle('open');
            menuTrigger.setAttribute('aria-expanded', !isOpen);
        });

        document.addEventListener('click', (e) => {
            if (!menuWrapper.contains(e.target)) {
                menuDropdown.classList.remove('open');
                menuTrigger.classList.remove('open');
                menuTrigger.setAttribute('aria-expanded', 'false');
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && menuDropdown.classList.contains('open')) {
                menuDropdown.classList.remove('open');
                menuTrigger.classList.remove('open');
                menuTrigger.setAttribute('aria-expanded', 'false');
            }
        });

        // ─── Category Filter ───
        const filterTabs = document.querySelectorAll('.filter-tab');
        const allProjects = document.querySelectorAll('.project[data-category]');
        const workCount = document.querySelector('.work-count');

        filterTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Update active tab
                filterTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                const filter = tab.dataset.filter;
                let visibleCount = 0;

                allProjects.forEach(project => {
                    if (filter === 'all' || project.dataset.category === filter) {
                        project.classList.remove('filter-hidden');
                        // Reset reveal for staggered entrance
                        project.classList.remove('visible');
                        project.style.transitionDelay = (visibleCount * 0.12) + 's';
                        visibleCount++;
                    } else {
                        project.classList.add('filter-hidden');
                        project.style.transitionDelay = '0s';
                    }
                });

                // Trigger staggered reveal after a brief frame
                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        allProjects.forEach(project => {
                            if (!project.classList.contains('filter-hidden')) {
                                project.classList.add('visible');
                            }
                        });
                    });
                });

                // Update count
                workCount.textContent = String(visibleCount).padStart(2, '0') + ' Projects';
            });
        });

        // Apply default filter on page load
        document.querySelector('.filter-tab.active').click();

        // ─── Scroll Reveal ───
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    revealObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

        document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

        // ─── Video hover-to-play ───
        document.querySelectorAll('.project').forEach(project => {
            const video = project.querySelector('video');
            if (!video) return;

            project.addEventListener('mouseenter', () => {
                video.currentTime = 0;
                video.play().catch(() => { });
                video.style.opacity = '1';
            });

            project.addEventListener('mouseleave', () => {
                video.pause();
                video.style.opacity = '0';
            });
        });

        // ═══════════════════════════════════════════
        // PROJECT DETAIL — Same system as main site
        // ═══════════════════════════════════════════
        const projectData = [
            {
                title: 'Trump Taj Mahal — Part 1',
                embed: 'youtube',
                videoId: 'kO5SH1bXPhE',
                description: 'Political attack ad targeting Trump\'s Taj Mahal casino failures. Hard-hitting rapid-response spot designed for maximum impact across broadcast and digital.',
                credits: [
                    ['Type', 'Political Ad'],
                    ['Role', 'Editor'],
                    ['Format', 'Broadcast / Digital']
                ]
            },
            {
                title: 'Trump Taj Mahal — Part 2',
                embed: 'youtube',
                videoId: 'DZajWmSKwjU',
                description: 'Follow-up political spot continuing the Taj Mahal narrative. Built for rapid deployment across TV, web, and social platforms.',
                credits: [
                    ['Type', 'Political Ad'],
                    ['Role', 'Editor'],
                    ['Format', 'Broadcast / Digital']
                ]
            },
            {
                title: 'David Curry — Announcement',
                embed: 'youtube',
                videoId: 'GMD6_PnGfMA',
                description: 'Campaign announcement video for David Curry. Clean, authoritative messaging designed to launch a political candidacy with impact.',
                credits: [
                    ['Type', 'Campaign Ad'],
                    ['Role', 'Editor'],
                    ['Format', 'Broadcast / Digital']
                ]
            },
            {
                title: 'Law & Order — TV :30',
                embed: 'youtube',
                videoId: 'Hf6xlsqQBr4',
                description: 'Hard-hitting law and order themed political TV spot. Thirty-second broadcast ad built for rapid deployment.',
                credits: [
                    ['Type', 'Political Ad'],
                    ['Role', 'Editor'],
                    ['Format', 'TV :30']
                ]
            },
            {
                title: 'Hamlin',
                embed: 'youtube',
                videoId: 'IfL5xvKUvdE',
                description: 'Legal video for Hamlin. Professional, clear messaging crafted for legal proceedings and client communication.',
                credits: [
                    ['Type', 'Legal'],
                    ['Role', 'Editor'],
                    ['Format', 'Digital']
                ]
            },
            {
                title: 'Chatfield Smith',
                embed: 'youtube',
                videoId: 'YzIiSskJOrs',
                description: 'Legal video for Chatfield Smith. Polished production designed to support legal communications and presentations.',
                credits: [
                    ['Type', 'Legal'],
                    ['Role', 'Editor'],
                    ['Format', 'Digital']
                ]
            },
            {
                title: 'Chickasha Murder',
                embed: 'youtube',
                videoId: '73L1JUTXlg8',
                description: 'Hard-hitting sixty-second political spot. Rapid-response ad designed for broadcast and digital deployment.',
                credits: [
                    ['Type', 'Political Ad'],
                    ['Role', 'Editor'],
                    ['Format', ':60']
                ]
            },
            {
                title: 'Banco Austin',
                embed: 'youtube',
                videoId: 'UR0bXieWumw',
                description: 'Government video production for Banco Austin. Clear, professional messaging for public-facing communications.',
                credits: [
                    ['Type', 'Government'],
                    ['Role', 'Editor'],
                    ['Format', 'Digital']
                ]
            }
        ];

        // DOM refs
        const transitionPanel = document.getElementById('pageTransition');
        const detailOverlay = document.getElementById('projectDetailOverlay');
        let detailIframe = document.getElementById('detailIframe');
        const detailTitle = document.getElementById('detailTitle');
        const detailDesc = document.getElementById('detailDescription');
        const detailCredits = document.getElementById('detailCredits');
        const detailBack = document.getElementById('detailBack');
        const mainContent = document.querySelectorAll('body > :not(.page-transition):not(.project-detail-overlay):not(script)');

        let isTransitioning = false;
        let savedScrollY = 0;

        function getEmbedUrl(project) {
            if (project.embed === 'youtube') {
                return `https://www.youtube.com/embed/${project.videoId}?rel=0&modestbranding=1&playsinline=1&enablejsapi=0`;
            }
            return `https://player.vimeo.com/video/${project.videoId}?autoplay=0&loop=0&title=0&byline=0&portrait=0`;
        }

        function populateDetail(index) {
            const p = projectData[index];
            const container = document.getElementById('detailVideo');
            if (detailIframe) detailIframe.remove();
            const newIframe = document.createElement('iframe');
            newIframe.id = 'detailIframe';
            newIframe.allow = 'autoplay; fullscreen; picture-in-picture';
            newIframe.allowFullscreen = true;
            newIframe.src = getEmbedUrl(p);
            container.appendChild(newIframe);
            detailIframe = newIframe;

            detailTitle.textContent = p.title;
            detailDesc.textContent = p.description;
            detailCredits.innerHTML = p.credits.map(([label, value]) =>
                `<div class="detail-credit-row">
                    <span class="detail-credit-label">${label}</span>
                    <span class="detail-credit-value">${value}</span>
                </div>`
            ).join('');
        }

        function animateDetailContent() {
            const fadeEls = detailOverlay.querySelectorAll('.detail-fade-in');
            fadeEls.forEach(el => el.classList.remove('animate'));
            fadeEls.forEach((el, i) => {
                setTimeout(() => el.classList.add('animate'), 80 * i);
            });
        }

        const WIPE_MS = 500;

        function lockScroll() {
            document.body.style.position = 'fixed';
            document.body.style.top = `-${savedScrollY}px`;
            document.body.style.left = '0';
            document.body.style.right = '0';
        }
        function unlockScroll() {
            document.body.style.position = '';
            document.body.style.top = '';
            document.body.style.left = '';
            document.body.style.right = '';
        }

        function openProject(index) {
            if (isTransitioning) return;
            isTransitioning = true;
            savedScrollY = window.scrollY;
            lockScroll();

            transitionPanel.style.transform = 'translateY(0%)';

            setTimeout(() => {
                mainContent.forEach(el => el.style.display = 'none');
                populateDetail(index);
                detailOverlay.classList.add('visible');
                detailOverlay.scrollTop = 0;

                animateDetailContent();
                void detailOverlay.offsetHeight;

                transitionPanel.style.transform = 'translateY(-100%)';

                setTimeout(() => {
                    transitionPanel.style.transition = 'none';
                    transitionPanel.style.transform = 'translateY(100%)';
                    void transitionPanel.offsetHeight;
                    transitionPanel.style.transition = '';

                    unlockScroll();
                    isTransitioning = false;
                }, WIPE_MS);
            }, WIPE_MS);
        }

        let isClosing = false;

        function closeProject() {
            if (isClosing) return;
            isClosing = true;

            if (isTransitioning) {
                transitionPanel.style.transition = 'none';
                transitionPanel.style.transform = 'translateY(100%)';
                void transitionPanel.offsetHeight;
                transitionPanel.style.transition = '';
            }
            isTransitioning = true;
            lockScroll();

            if (detailIframe) {
                detailIframe.remove();
                detailIframe = null;
            }

            transitionPanel.style.transform = 'translateY(0%)';

            setTimeout(() => {
                detailOverlay.classList.remove('visible');
                mainContent.forEach(el => el.style.display = '');

                unlockScroll();
                window.scrollTo({ top: savedScrollY, behavior: 'instant' });
                void document.body.offsetHeight;

                transitionPanel.style.transform = 'translateY(100%)';

                setTimeout(() => {
                    isTransitioning = false;
                    isClosing = false;
                }, WIPE_MS);
            }, WIPE_MS);
        }

        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }

        // Wire up card clicks
        document.querySelectorAll('.project').forEach((card) => {
            const index = parseInt(card.dataset.project);
            if (isNaN(index)) return;
            card.addEventListener('click', () => {
                history.pushState({ project: index }, '');
                openProject(index);
            });
        });

        detailBack.addEventListener('click', () => {
            closeProject();
            history.back();
        });

        window.addEventListener('popstate', () => {
            if (detailOverlay.classList.contains('visible')) {
                closeProject();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && detailOverlay.classList.contains('visible')) {
                closeProject();
                history.back();
            }
        });
    </script>

</body>

</html>